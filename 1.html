<script>
var maxProduct = function (nums) {
  let mi = nums[0],
      ma = nums[0],
      res = nums[0]
  for (let i = 1; i < nums.length; i++) {
    if (nums[i] < 0) {
      [mi, ma] = [ma, mi]
    }
    ma = Math.max(ma * nums[i], nums[i]) // 最正的数
    mi = Math.min(mi * nums[i], nums[i]) // 最负的数
    res = Math.max(res, ma)
  }
  return res
}

console.log(maxProduct([-4,-3,-2]))
</script>